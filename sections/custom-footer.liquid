<footer id="section-{{ section.id }}" class="custom-footer"
  style="
    --footer-bg: {{ section.settings.bg_color }};
    --footer-pt: {{ section.settings.padding_top }}px;
    --footer-pb: {{ section.settings.padding_bottom }}px;
    --footer-heading: {{ section.settings.heading_color }};
    --footer-text: {{ section.settings.text_color }};
    --footer-heading-size: {{ section.settings.heading_size }}px;
    --copyright-align: {{ section.settings.copyright_align }};

  /* NEW: newsletter button vars */
  --newsletter-btn-bg: {{ section.settings.newsletter_btn_bg }};
  --newsletter-btn-text: {{ section.settings.newsletter_btn_text }};
  --newsletter-btn-border: {{ section.settings.newsletter_btn_border_color }};
  --newsletter-btn-border-width: {{ section.settings.newsletter_btn_border_width }}px;
  --newsletter-btn-radius: {{ section.settings.newsletter_btn_radius }}px;
  "
>
  <div class="footer-inner{% unless section.settings.full_width %} footer-container{% endunless %}">
    <!-- Row 1 -->
    <div class="footer-row footer-row--top">
      <div class="footer-col">
        <h3>{{ section.settings.quick_links_heading | default: 'Quick Links' }}</h3>
        {% if section.settings.col1_use_text and section.settings.col1_text != blank %}
        <div class="footer-richtext">{{ section.settings.col1_text }}</div>
        {% elsif section.settings.quick_links_menu != blank and linklists[section.settings.quick_links_menu] %}
        <ul>
            {% for link in linklists[section.settings.quick_links_menu].links %}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
      </div>

      <div class="footer-col">
        <h3>{{ section.settings.help_links_heading | default: 'Help' }}</h3>
        {% if section.settings.col2_use_text and section.settings.col2_text != blank %}
        <div class="footer-richtext">{{ section.settings.col2_text }}</div>
        {% elsif section.settings.help_links_menu != blank and linklists[section.settings.help_links_menu] %}
        <ul>
            {% for link in linklists[section.settings.help_links_menu].links %}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
      </div>

      <div class="footer-col">
        <h3>{{ section.settings.newsletter_heading | default: 'Newsletter' }}</h3>
        <p>{{ section.settings.newsletter_subheading | default: 'Join our community' }}</p>
        <form method="post" action="{{ routes.root_url }}contact#ContactFooter" accept-charset="UTF-8" class="newsletter-form" id="ContactFooter-{{ section.id }}">
          <input type="hidden" name="form_type" value="customer">
          <input type="hidden" name="utf8" value="✓">
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="newsletter-field">
            <label class="visually-hidden" for="NewsletterEmail-{{ section.id }}">Email</label>
            <input id="NewsletterEmail-{{ section.id }}" type="email" name="contact[email]" placeholder="Enter your email" required autocapitalize="off" autocomplete="email" autocorrect="off">
          </div>
          <button type="submit" aria-label="Subscribe to newsletter">Sign Up</button>
        </form>
      </div>
    </div>

    <!-- Row 2 -->
    <div class="footer-row footer-row--middle">
      <!-- Currency switcher (your exact code) -->
      <div class="footer-col footer-col--localization">
        <div class="custom-currency-bar" id="FooterCurrency-{{ section.id }}">
          {%- if localization.available_countries.size > 1 -%}
            <localization-form data-prevent-hide>
              {%- form 'localization', id: 'FooterCountryForm', class: 'localization-form' -%}
                <div>
                  <h2 class="visually-hidden" id="FooterCountryLabel">
                    {{ 'localization.country_label' | t }}
                  </h2>
                  {%- render 'country-localization', localPosition: 'FooterCountry' -%}
                </div>
              {%- endform -%}
            </localization-form>
          {%- endif -%}
        </div>
      </div>

      <!-- Payment logos -->
      <div class="footer-col footer-col--payments">
      {% assign payment_logo_blocks = section.blocks | where: 'type', 'payment_logo' %}
      <div class="payment-logos payment-logos--{{ section.settings.payment_logo_align }}">
        <ul class="list list-payment" role="list">
          {%- assign payment_logo_blocks = section.blocks | where: 'type', 'payment_logo' -%}
          {%- for block in payment_logo_blocks -%}
            <li class="list-payment__item" {{ block.shopify_attributes }}>
              {%- if block.settings.source == 'image' and block.settings.image != blank -%}
                <img class="pay-icon"
                    src="{{ block.settings.image | image_url: width: 70 }}"
                    alt="{{ block.settings.alt | escape }}"
                    width="35" height="22" loading="lazy">
              {%- elsif block.settings.source == 'svg' and block.settings.svg != blank -%}
                <span class="pay-icon-svg" aria-label="{{ block.settings.alt | escape }}">
                  {{ block.settings.svg }}
                </span>
              {%- endif -%}
            </li>
          {%- endfor -%}
        </ul>
      </div>
      </div>
    </div>

    <!-- Row 3 -->
    <div class="footer-row footer-row--bottom">
      <div class="privacy">© {{ 'now' | date: '%Y' }}, {{ section.settings.copyright_name }}</div>
    </div>
  </div>
</footer>

{% stylesheet %}
.custom-footer{
  background: var(--footer-bg);
  padding-top: var(--footer-pt);
  padding-bottom: var(--footer-pb);
  color: var(--footer-text);
}
.custom-footer h3{
  color: var(--footer-heading);
  font-size: var(--footer-heading-size);
  margin: 0 0 15px;
}
.custom-footer a{ color: var(--footer-text); text-decoration: none; }
.custom-footer a:hover{ text-decoration: underline; }

/* Inner container: keep background full-width */
.footer-container{ max-width: 1200px; margin: 0 auto; padding: 0 20px; }

/* Layout */
.footer-row{ display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 30px; }
.footer-row--top .footer-col{ flex: 1 1 260px; }
.footer-row--middle{ align-items: center; justify-content: space-between; }
.footer-col--localization{ flex: 1 1 240px; }
.footer-col--payments{ flex: 2 1 400px; }

.footer-menu{ list-style: none; padding: 0; margin: 0; }
.footer-menu li{ margin: 6px 0; }

/* Newsletter */
.newsletter-form input[type="email"]{ width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; }
.newsletter-form button{ width: 100%; padding: 10px; border: none; border-radius: 4px; background: var(--footer-heading); color: #fff; cursor: pointer; }
.newsletter-form button:hover{ opacity: .92; }

/* Payment logos */
.payment-logos .list-payment{ display: flex; flex-wrap: wrap; gap: 10px; align-items: center; padding: 0; margin: 0; list-style: none; }
.list-payment__item .icon,
.list-payment__item svg{ width: 35px; height: 22px; display: block; }
.payment-logos img{ width: 35px; height: 22px; display: block; }

/* Optional: style the dropdown from country-localization if desired
.custom-currency-bar .disclosure__list-wrapper{
  background: #000;
  border: 1px solid #fff;
  border-radius: 20px;
}
.custom-currency-bar .disclosure__link{ color: #fff; }
.custom-currency-bar .disclosure__item:hover{ background: transparent; }
*/

.footer-row--bottom{ margin-bottom: 0; }
.privacy{ width: 100%; text-align: var(--copyright-align); font-size: 14px; color: var(--footer-text); }

/* A11y */
.visually-hidden{
  position: absolute !important; height: 1px; width: 1px; overflow: hidden;
  clip: rect(1px,1px,1px,1px); white-space: nowrap;
}

/* Footer currency dropdown look */
.custom-currency-bar .disclosure__button{
  background:#000;
  color:#fff;
  border:1px solid #fff;
  border-radius:0px;
  padding:8px 12px;
  line-height:1;
  display:flex;
  align-items:center; gap:6px;
}
.custom-currency-bar .disclosure__button .icon-caret{
  width:12px;
  transition:transform .3s ease;
  color:#fff;
}
.custom-currency-bar .disclosure__button[aria-expanded="true"] .icon-caret{
  transform:rotate(180deg);
}

/* newsletter button */
.custom-footer .newsletter-form button[type="submit"] {
  width: 100%;
  padding: 10px 14px;
  background: var(--newsletter-btn-bg);
  color: var(--newsletter-btn-text);
  border: var(--newsletter-btn-border-width) solid var(--newsletter-btn-border);
  border-radius: var(--newsletter-btn-radius);
  line-height: 1.2;
  cursor: pointer;
}
.custom-footer .newsletter-form button[type="submit"]:focus {
  outline: 2px solid rgba(0,0,0,.15);
  outline-offset: 2px;
}

/* Dropdown panel */
.custom-currency-bar .disclosure__list-wrapper{
  background:#000;               /* black dropdown */
  border:1px solid #fff;         /* white border */
  border-radius:20px;            /* 20px radius */
  padding:6px;
  margin-top:8px;
  z-index:60;
}

/* Options (transparent background) */
.custom-currency-bar .disclosure__list{ background:transparent; }
.custom-currency-bar .disclosure__item{ list-style:none; }
.custom-currency-bar .disclosure__link{
  display:block;
  color:#fff;
  background:transparent !important;  /* transparent option rows */
  padding:8px 12px;
  text-decoration:none;
  border-radius:12px; /* keeps nice focus ring shape */
}
.custom-currency-bar .disclosure__link:hover,
.custom-currency-bar .disclosure__link:focus{
  background:transparent !important;  /* keep transparent on hover */
  text-decoration:underline;
}

/* payment logos */
.payment-logos .list-payment {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  padding: 0;
  list-style: none;
  justify-content: flex-start; /* default = left */
}
.payment-logos--right .list-payment {
  justify-content: flex-end;
}
.pay-icon { width: 35px; height: 22px; object-fit: contain; }
.pay-icon-svg svg { width: 38px; height: 24px; display: block; }

/* Icons inside list to white */
.custom-currency-bar .icon-checkmark{ color:#fff; }

/* Optional: remove full-screen overlay if your snippet adds it */
.custom-currency-bar .country-selector__overlay{ display:none; }

@media (max-width: 640px){
  .footer-row{ gap: 16px; }
  .footer-col--payments{ order: 2; }
  .footer-col--localization{ order: 1; }
}
{% endstylesheet %}

{% schema %}
{
  "name": "Custom Footer",
  "settings": [
    {
    "type": "text",
    "id": "quick_links_heading",
    "label": "Heading — Quick links",
    "default": "Quick Links"
    },
    {
    "type": "checkbox",
    "id": "col1_use_text",
    "label": "Column 1: use custom text instead of menu",
    "default": false
    },
    {
    "type": "richtext",
    "id": "col1_text",
    "label": "Column 1: custom text",
    "default": "<p>Add your column 1 content here.</p>"
    },
    {
    "type": "text",
    "id": "help_links_heading",
    "label": "Heading — Help links",
    "default": "Help"
    },
    {
    "type": "checkbox",
    "id": "col2_use_text",
    "label": "Column 2: use custom text instead of menu",
    "default": false
    },
    {
    "type": "richtext",
    "id": "col2_text",
    "label": "Column 2: custom text",
    "default": "<p>Add your column 2 content here.</p>"
    },
    {
    "type": "text",
    "id": "newsletter_heading",
    "label": "Heading — Newsletter",
    "default": "Newsletter"
    },
    {
    "type": "text",
    "id": "newsletter_subheading",
    "label": "Newsletter Subheader",
    "default": "Join our community"
    },
    {
      "type": "color",
      "id": "newsletter_btn_bg",
      "label": "Newsletter button background",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "newsletter_btn_text",
      "label": "Newsletter button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "newsletter_btn_border_color",
      "label": "Newsletter button border color",
      "default": "#111111"
    },
    {
      "type": "range",
      "id": "newsletter_btn_border_width",
      "label": "Newsletter button border width (px)",
      "min": 0,
      "max": 8,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "newsletter_btn_radius",
      "label": "Newsletter button border radius (px)",
      "min": 0,
      "max": 32,
      "step": 1,
      "default": 6
    },
    { "type": "checkbox", "id": "full_width", "label": "Full width content", "default": true },
    { "type": "range", "id": "padding_top", "label": "Top spacing", "min": 0, "max": 100, "step": 5, "default": 40 },
    { "type": "range", "id": "padding_bottom", "label": "Bottom spacing", "min": 0, "max": 100, "step": 5, "default": 40 },
    { "type": "color", "id": "bg_color", "label": "Section background color", "default": "#f9f9f9" },
    { "type": "color", "id": "heading_color", "label": "Headings color", "default": "#111111" },
    { "type": "color", "id": "text_color", "label": "Body text color", "default": "#333333" },
    { "type": "number", "id": "heading_size", "label": "Heading font size (px)", "default": 18 },

    { "type": "link_list", "id": "quick_links_menu", "label": "Quick links menu" },
    { "type": "link_list", "id": "help_links_menu", "label": "Help links menu" },

    { "type": "text", "id": "copyright_name", "label": "Brand / owner name", "default": "Your Store Name" },
    { "type": "select", "id": "copyright_align", "label": "Copyright alignment", "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "payment_logo_align",
      "label": "Payment logos alignment",
      "options": [
        { "value": "left",  "label": "Left"  },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    }
  ],
  "blocks": [
    {
      "type": "payment_logo",
      "name": "Payment logo",
      "limit": 50,
      "settings": [
        {
          "type": "select",
          "id": "source",
          "label": "Icon source",
          "default": "svg",
          "options": [
            { "value": "svg", "label": "Custom SVG (paste)" },
            { "value": "image", "label": "Image upload" }
          ]
        },
        {
          "type": "html",
          "id": "svg",
          "label": "Inline SVG",
          "info": "Paste full <svg>…</svg> here"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "PNG/SVG. 35×22 recommended"
        },
        {
          "type": "text",
          "id": "alt",
          "label": "Alt text",
          "default": "Payment method"
        }
      ]
    }
  ],
  "presets": [
    { "name": "Custom Footer" }
  ]
}
{% endschema %}
