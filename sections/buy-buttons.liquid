
{% comment %} add this metaobject before add to cart button {% endcomment %}

{%- assign positions = product.metafields.custom.print_position_ref.value -%}
{%- if positions != blank -%}
  <fieldset class="print-positions" style="margin:1rem 0;">
    <legend class="print-positions__legend">Print position</legend>

    <div class="print-positions__grid">
      {%- for pos in positions -%}
        <label class="print-positions__card">
          <input
            type="radio"
            name="properties[Print position]"
            value="{{ pos.title | escape }}"
            class="print-positions__radio"
            {% if forloop.first %}checked{% endif %}
            required
          >
          <div class="print-positions__content">
            {%- if pos.image != blank -%}
              {{ pos.image
                | image_url: width: 480
                | image_tag: alt: pos.title, loading: 'lazy', class: 'print-positions__image', draggable: 'false' }}
            {%- endif -%}
            <span class="print-positions__title">{{ pos.title }}</span>
          </div>
        </label>
      {%- endfor -%}
    </div>
  </fieldset>

  <style>
    /* Grid: 2 columns, tidy spacing */
    .print-positions__grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 14px;
    }
    /* Stack to 1 column on very narrow screens if you want */
    @media (max-width: 480px) {
      .print-positions__grid { grid-template-columns: 1fr; }
    }

    /* Card layout: image on top, text below */
    .print-positions__card {
      display: block;
      cursor: pointer;
    }
    /* Visually hide the native radio but keep it accessible */
    .print-positions__radio {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }
    .print-positions__content {
      border: 1px solid rgba(0,0,0,.12);
      border-radius: 10px;
      padding: .75rem;
      text-align: center;
      transition: box-shadow .15s ease, border-color .15s ease, transform .05s ease;
      background: #fff;
    }
    .print-positions__card:hover .print-positions__content {
      border-color: rgba(0,0,0,.2);
    }
    /* Selected state */
    .print-positions__radio:checked + .print-positions__content {
      border-color: currentColor;
      box-shadow: 0 0 0 2px currentColor inset;
    }

    .print-positions__image {
      width: 100%;
      height: auto;
      aspect-ratio: 1 / 1;     /* keeps a neat square thumb */
      object-fit: contain;
      margin-bottom: .5rem;
      user-select: none;
    }
    .print-positions__title {
      display: block;
      font-size: 15px;
      line-height: 1.25rem;
    }
  </style>
{%- endif -%}
